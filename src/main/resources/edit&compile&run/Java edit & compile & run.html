<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Segoe UI" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601505 (en-US, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: Segoe UI;
      font-size: 11pt;
    }
  </style>
</head>
<body>
<a name="2379"/>

<div>
<span><div><span style="font-size: 14pt; color: rgb(229, 0, 255); font-family: arial; font-weight: bold;">编辑阶段：</span></div><div style="text-align: start;"><span style="font-size: 10pt; font-family: arial; font-weight: bold;">我们平时写的java代码称之为源代码, </span><span style="font-size: 10pt; font-family: arial; font-weight: bold;">包含源代码的文件称之为源文件(.java)</span></div><div style="text-align: start;"><span style="font-size: 13.3333px; font-family: arial; font-weight: bold;">编辑代码阶段需要</span><span style="font-size: 10pt; font-family: arial; font-weight: bold;">jre/lib/下核心类库的支持，idea,eclipse等IDE可以在编辑阶段进行语法检查</span></div><div style="text-align: start;"><span style="font-family: arial; font-weight: bold;">在我们编辑代码时会自动帮助我们进行语法检查，但是此时不会生成class文件</span></div><div style="text-align: start;"></div><div style="text-align: start;"></div><div style="text-align: start;"></div><div style="text-align: start;"></div><div style="text-align: start;"></div><div style="text-align: start;"></div><div style="text-align: start;"></div><div style="text-align: start;"></div><div style="text-align: start;"></div><div style="text-align: start;"></div><div style="text-align: start;"></div><div style="text-align: start;"></div><div style="text-align: start;"></div><div style="text-align: start;"></div><div style="text-align: start;"></div><div style="text-align: start;"></div><div style="text-align: start;"></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><span style="font-size: 14pt; color: rgb(229, 0, 255); font-family: arial; font-weight: bold;">编译阶段：</span></div><div style="text-align: start;"><span style="font-size: 11pt; color: rgb(229, 0, 255); font-family: arial; font-weight: bold;"> </span> <span style="font-size: 11pt; color: rgb(50, 135, 18); font-family: arial; font-weight: bold;">             jdk/bin/javac.exe(编译器)</span></div><div style="text-align: start;"><span style="font-size: 11pt; color: rgb(50, 135, 18); font-family: arial; font-weight: bold;">.java----------------------------------------------------------------------&gt;.class（保存到硬盘）</span></div><div style="text-align: start;"><span style="font-size: 14.6667px; color: rgb(50, 135, 18); font-family: arial; font-weight: bold;">               jdk/lib/tools.jar以及jre/lib/下核心类库的支持</span></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><img src="Java edit & compile & run_files/Image.png" type="image/png" data-filename="Image.png"/></div><div style="text-align: start;"><br/></div><div style="text-align: start;">编译可以理解为编译器检查源代码是否符合语法并其转化成.class字节码文件然后保存到硬盘上的<span style="font-weight: bold;">编译输出目录</span>（<span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(204, 0, 0); font-family: arial; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">compiler</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: arial; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(204, 0, 0); font-family: arial; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">output</span>），编译输出目录可以理解为最终的classpath，运行阶段就是从该classpath寻找加载class文件</div><div style="text-align: start;"><br/></div><div style="text-align: start;"><span style="font-weight: bold;">注意：</span>字节码文件是中间文件，不是标准的二进制文件，无法在操作系统中直接运行。</div><div style="text-align: start;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 10pt; font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">           </span><span style="font-family: &quot;Microsoft YaHei&quot;;">编译期只是做了一些翻译功能,并没有把代码放在内存中运行起来;，不会为变量分配内存空间；</span></div><div style="text-align: start;"><span style="font-family: &quot;Microsoft YaHei&quot;;">           可以这样理解：JVM分为栈内存、堆内存等，JVM并不会参与编译， 所以此时不会涉及内存空间分配</span></div><div style="text-align: start;"></div><div style="text-align: start;"><span style="font-size: 12pt;"><br/></span></div><div style="text-align: start;"><span style="font-size: 12pt;"><br/></span></div><div style="text-align: start;"><span style="font-size: 12pt; color: rgb(0, 0, 255); font-weight: bold;">编译输出目录：</span></div><div style="text-align: start;"><span style="font-size: 12pt; color: rgb(167, 69, 0); font-weight: bold;">1</span> <span style="font-weight: bold;">IDEA普通java工程的编译输出目录是 当前工程根目录/out/production/TestClassPath,</span> 这里/out/production/TestClassPath是自动生成的</div><div style="text-align: start;">运行阶段，类加载器会从jdk中寻找加载核心类库(核心class文件)，从编译输出目录寻找加载普通class文件</div><div style="text-align: start;"><img src="Java edit & compile & run_files/Image [1].png" type="image/png" data-filename="Image.png" width="673"/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><span style="font-size: 12pt; color: rgb(173, 0, 0); font-weight: bold;">2</span> <span style="font-weight: bold;">maven项目中，</span>java(.java)和resources（一般成为资源文件、比如图片、xml、txt、poperties等文件下的文件会按照自己的目录层次结构输出到<span style="font-weight: bold;">编译输出目录</span><span style="font-weight: bold;">target/class和target/test-classes</span>下。</div><div style="text-align: start;"><br/></div><div style="text-align: start;"><span style="font-weight: bold;">maven classpath包括：</span> 核心类库classspath. 依赖类库classpath,输出类库classpath</div><div style="text-align: start;">执行maven工程中的方法时候会先对整个工程进行编译,生成编译输出目录target/class和target/test-classes， 然后运行阶段会从jdk中寻找加载核心类库(核心class文件)，从.m2/repo下寻找加载依赖类库(依赖class文件)，从编译输出目录target/class和target/test-classes加载输出类库(项目生成的普通class文件) </div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><span style="font-weight: bold;">关于核心类库classspath. 依赖类库classpath,</span></div><div style="text-align: start;"><span style="font-size: 10pt; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; -webkit-text-stroke-width: 0px; white-space: normal; widows: 2; word-spacing: 0px; color: rgb(77, 77, 77); font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: common-ligatures;">对于maven项目来说，下图展示了某个子模块的核心类库classpath和依赖classpath</span></div><div style="text-align: start;"><img src="Java edit & compile & run_files/Image [2].png" type="image/png" data-filename="Image.png"/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><span style="font-weight: bold;">关于</span><span style="font-weight: bold;">输出类库classpath</span></div><div style="text-align: start;"><span style="font-size: 10pt; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; -webkit-text-stroke-width: 0px; white-space: normal; widows: 2; word-spacing: 0px;"><span style="font-size: 10pt; color: rgb(77, 77, 77); font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: common-ligatures;">下图展示了某个子模块的编译输出目录路径</span></span></div><div style="text-align: start;">每个子模块可选择inherit project compile output path 或者自定义compile output path</div><div style="text-align: start;"><img src="Java edit & compile & run_files/Image [3].png" type="image/png" data-filename="Image.png"/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><span style="font-weight: bold;">project规定了统一的编译输出目录</span></div><div style="text-align: start;"><img src="Java edit & compile & run_files/Image [4].png" type="image/png" data-filename="Image.png"/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><span style="font-weight: bold;">总结：maven某个类在运行阶段会从核心类库classspath. 依赖类库classpath,输出类库classpath中去寻找加载class文件</span></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><span style="color: rgb(0, 0, 255); font-weight: bold;">class文件数量：</span></div><div style="text-align: start;"><span style="font-weight: bold;">一个java源程序文件包含几个类和接口，经过编译后就会生成几个.class文件</span></div><div style="text-align: start;">源文件如下</div><div style="text-align: start;"><img src="Java edit & compile & run_files/Image [5].png" type="image/png" data-filename="Image.png" width="278"/></div><div style="text-align: start;"><br/></div><div style="text-align: start;">编译后产生如下三个文件</div><div style="text-align: start;"><img src="Java edit & compile & run_files/Image [6].png" type="image/png" data-filename="Image.png" width="249"/></div><div style="text-align: start;"><img src="Java edit & compile & run_files/Image [7].png" type="image/png" data-filename="Image.png" width="261"/></div><div style="text-align: start;"></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><span style="font-size: 14pt; color: rgb(229, 0, 255); font-weight: bold;">运行阶段：</span></div><div style="text-align: start;"><span style="font-size: 12pt;"><br/></span></div><div style="text-align: start;"><span style="font-size: 11pt; color: rgb(0, 0, 255); font-weight: bold;">JRE可完成运行阶段</span></div><div style="text-align: start;"><span style="color: rgb(229, 0, 255); font-weight: bold;">               </span> <span style="font-size: 10pt; color: rgb(50, 135, 18); font-weight: bold;">                             jre/bin/java.exe或者jdk/bin/java.exe</span></div><div style="text-align: start;"><span style="font-size: 10pt; color: rgb(50, 135, 18); font-weight: bold;">.class(字节码)</span><span style="color: rgb(50, 135, 18); font-weight: bold;">-------------------------------------------------------------------------------------------&gt;机器码(</span><span style="font-size: 10pt; color: rgb(50, 135, 18); font-weight: bold;">二进制文件)</span></div><div style="text-align: start;"><span style="color: rgb(50, 135, 18); font-weight: bold;">                           根据classpath</span><span style="font-size: 10pt; color: rgb(50, 135, 18); font-weight: bold;">硬盘上寻找核心类库及编译好的class文件加载到JVM并</span><span style="font-size: 10pt; color: rgb(50, 135, 18); font-weight: bold;">解释</span></div><div style="text-align: start;">java.exe命令会启动类加载器ClassLoader( <span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(64, 64, 64); font-family: -apple-system, BlinkMacSystemFont, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">也是JRE的一部分</span>)，ClassLoader会根据<span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun;">classpath(</span><span style="font-size: 11pt; color: rgb(51, 51, 51);">磁盘或者网络上</span><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun;">)</span>寻找class文件,找到后会将其装载到jvm内存中，并为之生成对应的 java.lang.Class 对象;  然后jvm将字节码文件解释称二进制文件，然后操作系统执行二进制和底层硬件平台进行交互。</div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><font style="font-size: 10pt;"><span style="box-sizing: border-box; outline: 0px; overflow-wrap: break-word; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 10pt; font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">所谓运行期就把在磁盘中的代码加载到内存中执行起来</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 10pt; font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">.</span></font><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 10pt; font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">在Ja</span><span style="font-size: 10pt; font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">va中把磁盘中的代码放到</span></span><span style="font-size: 10pt; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(77, 77, 77); font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">内存中就是类加载过程</span></div><div style="text-align: start;">class文件运行在JVM上，各个平台会根据自身特性实现各自的JVM, <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239); color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">JVM来向下关联所有操作系统,</span> <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239); color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">向上提供统一接口，</span>JVM会屏蔽操作系统的差异，实现字节码文件的跨平台，所以我们可以将windows平台下的.java文件或者windows平台编译的到的class文件拷贝到linux Mac等其它操作系统平台</div><div style="text-align: start;">如果只是运行字节码文件，只需要装jre即可</div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><span style="font-size: 14pt; color: rgb(229, 0, 255); font-weight: bold;">关于 Command Line </span></div><div style="text-align: start;"><span style="color: rgb(50, 135, 18); font-weight: bold;">不配置classpath从默认当前路径寻加载普通class文件，若定义则从定义classpath路径寻找加载</span><span style="color: rgb(50, 135, 18); font-weight: bold;">普通class文件</span><span style="color: rgb(50, 135, 18); font-weight: bold;">；</span></div><div style="text-align: start;"><span style="color: rgb(50, 135, 18); font-weight: bold;">从jdk中寻找加载核心类库(核心class文件)</span></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><span style="font-weight: bold;">javac  java源文件路径</span>            编译输出目录默认是当前工作目录 ，无论class是否有package, 编译输出目录不带有包名路径</div><div style="text-align: start;"><br/></div><div style="text-align: start;"><span style="font-weight: bold;">javac  -d 编译输出目录 </span> <span style="font-weight: bold;">java源文件路径</span><span style="font-weight: bold;">     </span>        <span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 10pt; color: rgb(77, 77, 77); font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">d是</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 10pt; color: rgb(77, 77, 77); font-family: &quot;Microsoft YaHei&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">directory</span> , <span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 10pt; color: rgb(77, 77, 77); font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">-d参数用于指定生成class文件的位置,</span>  -d方式使得编译输出目录包含package对应的目录，最终.class问价路径是 -d路径/包名路径/xxx.class;                                                                                  为了使得classloader可以找到该class文件，这里的-d应该指向calsspath</div><div style="text-align: start;"><br/></div><div style="text-align: start;"><span style="font-weight: bold;">java 全类名   </span> 这里必须是全类名； 若.java不带有package,全类名就只是class名；若.java带有有package,那么全类名就是package名.class名</div><div style="text-align: start;">                       命令行中的全类名要与最终class文件的”身份“(是否包含package)一致</div><div style="text-align: start;"><br/></div><div style="text-align: start;">建议：编译时使用 javac -d xxx 方式；</div><div style="text-align: start;">           运行时使用 java 全类名 方式</div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;"><font style="font-size: 14pt;"><br/></font></div><div style="text-align: start;"><span style="font-size: 14pt; color: rgb(229, 0, 255); font-weight: bold;">关于开发：</span></div><div style="text-align: start;">字节码文件生成之后，删除java源文件并不会影响程序的运行，因为jvm会启动ClassLoader会加载字节码文件，然后jvm解释执行；但是运行结果如果不符合预期，会对java源文件 重新修改并在再次进行编译运行分析结果</div><div style="text-align: start;">上面编辑、编译、运行、分析然后再编辑、编译、运行、分析的过程就称之为开发。</div><div style="text-align: start;"><br/></div><div style="text-align: start;">开发过程需要jdk/bin/javac.exe 和 jre/lib中的核心类库，开发人员一定需要安装jdk,包含 java工具(编译器javac.exe ，解释器java.exe)和核心类库lib</div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div><br/></div></span>
</div></body></html> 